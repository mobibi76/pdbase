<!doctype html>
<html lang="ko">

    <head>
        <title>프로세스 디자인 기반 컨설팅 서비스 | 리스크 애자일 프로세스 디자인</title>
        
        <!--meta: SEO, mobile ops. and encoding-->
        <meta name="description"
        content="고객의 경험과 지식을 디자인하여 문제를 해결하는 프로세스 디자인 기반 컨설팅 서비스 :
        리스크 애자일, 지식 네트워크, 전략, 제품화, 사업화, 정보보호, 시스템 디자인, 애자일 프로세스">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta charset="utf-8">

        <link rel="stylesheet" href="./style/style.css">

        <!-- use: jQuery Google CDN -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

        <!-- use: fetch API -->
        <script src="./source/fetch.js"></script>
    </head>

    <body>
        <header>
            <h1>pdbops.com {Process Design-Based Ops.}</h1>
            <h2><a href="./index.html">프로세스디자인베이스 컨설팅 연구소</a></h2>
        </header>

        <div id="grid">
            <nav id="nav"></nav>
            <main id="content">
                <div id="container"></div>
            </main>
        </div>

        <script>
            /*--fetch API-------------------------*/
            // function: define introFetch function
                function introFetch(pageTitle) {
                    fetch(pageTitle).then(response => {
                        if (!response.ok) {
                            throw new Error('Network response was not OK.');
                        }
                        return response.text();
                    }).then(text => {
                        const containerElement = document.querySelector('#container');
                        if (containerElement) {
                            containerElement.innerHTML = text;
                            containerElement.scrollTop = 0;
                        }
                    }).catch(error => {
                        console.error('There has been a problem with the fetch operation:', error);
                    });
                }

            // function: load pages through fetch API with ERROR handle
                function fetchPageContent(url, targetElementSelector) {
                    fetch(url).then(response => {
                        if (!response.ok) {
                            throw new Error('Network response was not OK.');
                        }
                        return response.text();
                    }).then(text => {
                        const targetElement = document.querySelector(targetElementSelector);
                        if (targetElement) {
                            targetElement.innerHTML = text;
                            targetElement.scrollTop = 0;
                        }
                    }).catch(error => {
                        console.error('There has been a problem with the fetch operation:', error);
                    });
                }

            // Load contents on pages
            document.addEventListener("DOMContentLoaded", function() {
                fetchPageContent('Menu', '#nav');
                fetchPageContent('Home', '#container');

            /*--------------------------------------*/
            // calculale all heights for scroll issue
                function adjustContainerHeight() {
                    const headers = document.querySelectorAll('h1, h2');
                    let headerHeight = 0;

                    headers.forEach(header => {
                        headerHeight += header.getBoundingClientRect().height;
                    });

                    const gridHeight = window.innerHeight - headerHeight;
                    document.querySelector('#grid').style.height = `${gridHeight}px`;
                    document.querySelector('#content').style.height = `${gridHeight}px`;
                }

                adjustContainerHeight();
                window.addEventListener('resize', adjustContainerHeight);
            });

            /*-------------------------------------------------*/
            // prevent contents from the mouse right-click event
            document.addEventListener('contextmenu', function(event) {
                event.preventDefault();
            });
        </script>
    </body>
</html>